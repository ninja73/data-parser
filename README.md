# Recommendation system

## Описание ETL-процессов.

### Процесс извлечения данных из системы-источника "Крупная федеральная сеть по продаже офисного оборудования" и "Небольшая сеть пиццерий в Москве и Санкт-Петербурге"

Процесс извлечения данных для сущности **ClientInfo**:
- извлекает записи из **csv** файла по указанному пути;
- обогащает извлеченные записи полями, специфичными для сущности **ClientInfo**;
- удаляет из извлеченных записей поля, отсутствующие в сущности **ClientInfo**;
- размещает преобразованные записи в **csv** файла рядом.

Входные данные.
---

Перечень полей "Крупная федеральная сеть по продаже офисного оборудования":

| Колонка        | Тип    | 
| -------------  |:------:| 
| branch         | string | 
| client_id      | int32  | 
| region         | string | 
| first_purchase | string | 
| orders_count   | int32  | 
| payment_sum    | double | 

Перечень полей "Небольшая сеть пиццерий в Москве и Санкт-Петербурге":

| Колонка           | Тип    | 
| ----------------- |:------:| 
| email             | string | 
| filial_id         | int32  | 
| reg_timestamp     | int32  | 
| orders_last_month | int32  | 
| payment_sum       | double |

Алгоритм работы
---

Выполняется чтение записей из csv файла, каждую запись извлекает парсер-комбинаторов и преобразует в нужный вид, не валидные данные отбрасываются.
Парсер-комбинаторов подходит для анализа данных с фиксированной структурой.

Формирование поля **userId**, в случае с "Небольшая сеть пиццерий в Москве и Санкт-Петербурге" в качестве идентификатора можно использовать поле **email**, "Крупная федеральная сеть по продаже офисного оборудования" используются поля **branch + client_id** т.к. **client_id** уникален в пределах федерального округа (поле **branch**)

Формирование поля **experience**, вычитаем от текущей даты, **first_purchase** или **reg_timestamp**. Поле **first_purchase** приводится к формату **Unix Timestamp**.

Поле **region** сохранаем как есть, возможно стоит перевести в числовой формат т.к. это поле только для категоризации, без необходимости гео-интерпретации.

Выходные данные.
---
Все данные сохраняем в файл формата csv, в директорию входные данные.

| Колонка           | Тип    | 
| ----------------- |:------:| 
| userId            | string | 
| experience        | int32  | 
| ordersCount       | int32  | 
| paymentSum        | double | 
| region            | string |
